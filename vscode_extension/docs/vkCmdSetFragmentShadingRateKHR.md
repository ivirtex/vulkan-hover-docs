# vkCmdSetFragmentShadingRateKHR(3) Manual Page

## Name

vkCmdSetFragmentShadingRateKHR - Set pipeline fragment shading rate and combiner operation dynamically for a command buffer



## [](#_c_specification)C Specification

To [dynamically set](https://registry.khronos.org/vulkan/specs/latest/html/vkspec.html#pipelines-dynamic-state) the pipeline fragment shading rate and combiner operation, call:

```c++
// Provided by VK_KHR_fragment_shading_rate
void vkCmdSetFragmentShadingRateKHR(
    VkCommandBuffer                             commandBuffer,
    const VkExtent2D*                           pFragmentSize,
    const VkFragmentShadingRateCombinerOpKHR    combinerOps[2]);
```

## [](#_parameters)Parameters

- `commandBuffer` is the command buffer into which the command will be recorded.
- `pFragmentSize` specifies the pipeline fragment shading rate for subsequent drawing commands.
- `combinerOps` specifies a [VkFragmentShadingRateCombinerOpKHR](https://registry.khronos.org/vulkan/specs/latest/man/html/VkFragmentShadingRateCombinerOpKHR.html) determining how the [pipeline](https://registry.khronos.org/vulkan/specs/latest/html/vkspec.html#primsrast-fragment-shading-rate-pipeline), [primitive](https://registry.khronos.org/vulkan/specs/latest/html/vkspec.html#primsrast-fragment-shading-rate-primitive), and [attachment shading rates](https://registry.khronos.org/vulkan/specs/latest/html/vkspec.html#primsrast-fragment-shading-rate-attachment) are [combined](https://registry.khronos.org/vulkan/specs/latest/html/vkspec.html#primsrast-fragment-shading-rate-combining) for fragments generated by subsequent drawing commands.

## [](#_description)Description

This command sets the pipeline fragment shading rate and combiner operation for subsequent drawing commands when drawing using [shader objects](https://registry.khronos.org/vulkan/specs/latest/html/vkspec.html#shaders-objects), or when the graphics pipeline is created with `VK_DYNAMIC_STATE_FRAGMENT_SHADING_RATE_KHR` set in [VkPipelineDynamicStateCreateInfo](https://registry.khronos.org/vulkan/specs/latest/man/html/VkPipelineDynamicStateCreateInfo.html)::`pDynamicStates`. Otherwise, this state is specified by the [VkPipelineFragmentShadingRateStateCreateInfoKHR](https://registry.khronos.org/vulkan/specs/latest/man/html/VkPipelineFragmentShadingRateStateCreateInfoKHR.html) values used to create the currently active pipeline.

Valid Usage

- [](#VUID-vkCmdSetFragmentShadingRateKHR-pipelineFragmentShadingRate-04507)VUID-vkCmdSetFragmentShadingRateKHR-pipelineFragmentShadingRate-04507  
  If the [`pipelineFragmentShadingRate`](https://registry.khronos.org/vulkan/specs/latest/html/vkspec.html#features-pipelineFragmentShadingRate) feature is not enabled, `pFragmentSize->width` **must** be `1`
- [](#VUID-vkCmdSetFragmentShadingRateKHR-pipelineFragmentShadingRate-04508)VUID-vkCmdSetFragmentShadingRateKHR-pipelineFragmentShadingRate-04508  
  If the [`pipelineFragmentShadingRate`](https://registry.khronos.org/vulkan/specs/latest/html/vkspec.html#features-pipelineFragmentShadingRate) feature is not enabled, `pFragmentSize->height` **must** be `1`
- [](#VUID-vkCmdSetFragmentShadingRateKHR-pipelineFragmentShadingRate-04509)VUID-vkCmdSetFragmentShadingRateKHR-pipelineFragmentShadingRate-04509  
  One of the [`pipelineFragmentShadingRate`](https://registry.khronos.org/vulkan/specs/latest/html/vkspec.html#features-pipelineFragmentShadingRate), [`primitiveFragmentShadingRate`](https://registry.khronos.org/vulkan/specs/latest/html/vkspec.html#features-primitiveFragmentShadingRate), or [`attachmentFragmentShadingRate`](https://registry.khronos.org/vulkan/specs/latest/html/vkspec.html#features-attachmentFragmentShadingRate) features **must** be enabled
- [](#VUID-vkCmdSetFragmentShadingRateKHR-primitiveFragmentShadingRate-04510)VUID-vkCmdSetFragmentShadingRateKHR-primitiveFragmentShadingRate-04510  
  If the [`primitiveFragmentShadingRate`](https://registry.khronos.org/vulkan/specs/latest/html/vkspec.html#features-primitiveFragmentShadingRate) feature is not enabled, `combinerOps`\[0] **must** be `VK_FRAGMENT_SHADING_RATE_COMBINER_OP_KEEP_KHR`
- [](#VUID-vkCmdSetFragmentShadingRateKHR-attachmentFragmentShadingRate-04511)VUID-vkCmdSetFragmentShadingRateKHR-attachmentFragmentShadingRate-04511  
  If the [`attachmentFragmentShadingRate`](https://registry.khronos.org/vulkan/specs/latest/html/vkspec.html#features-attachmentFragmentShadingRate) feature is not enabled, `combinerOps`\[1] **must** be `VK_FRAGMENT_SHADING_RATE_COMBINER_OP_KEEP_KHR`
- [](#VUID-vkCmdSetFragmentShadingRateKHR-fragmentSizeNonTrivialCombinerOps-04512)VUID-vkCmdSetFragmentShadingRateKHR-fragmentSizeNonTrivialCombinerOps-04512  
  If the [`fragmentSizeNonTrivialCombinerOps`](https://registry.khronos.org/vulkan/specs/latest/html/vkspec.html#limits-fragmentShadingRateNonTrivialCombinerOps) limit is not supported, elements of `combinerOps` **must** be either `VK_FRAGMENT_SHADING_RATE_COMBINER_OP_KEEP_KHR` or `VK_FRAGMENT_SHADING_RATE_COMBINER_OP_REPLACE_KHR`
- [](#VUID-vkCmdSetFragmentShadingRateKHR-pFragmentSize-04513)VUID-vkCmdSetFragmentShadingRateKHR-pFragmentSize-04513  
  `pFragmentSize->width` **must** be greater than or equal to `1`
- [](#VUID-vkCmdSetFragmentShadingRateKHR-pFragmentSize-04514)VUID-vkCmdSetFragmentShadingRateKHR-pFragmentSize-04514  
  `pFragmentSize->height` **must** be greater than or equal to `1`
- [](#VUID-vkCmdSetFragmentShadingRateKHR-pFragmentSize-04515)VUID-vkCmdSetFragmentShadingRateKHR-pFragmentSize-04515  
  `pFragmentSize->width` **must** be a power-of-two value
- [](#VUID-vkCmdSetFragmentShadingRateKHR-pFragmentSize-04516)VUID-vkCmdSetFragmentShadingRateKHR-pFragmentSize-04516  
  `pFragmentSize->height` **must** be a power-of-two value
- [](#VUID-vkCmdSetFragmentShadingRateKHR-pFragmentSize-04517)VUID-vkCmdSetFragmentShadingRateKHR-pFragmentSize-04517  
  `pFragmentSize->width` **must** be less than or equal to `4`
- [](#VUID-vkCmdSetFragmentShadingRateKHR-pFragmentSize-04518)VUID-vkCmdSetFragmentShadingRateKHR-pFragmentSize-04518  
  `pFragmentSize->height` **must** be less than or equal to `4`

Valid Usage (Implicit)

- [](#VUID-vkCmdSetFragmentShadingRateKHR-commandBuffer-parameter)VUID-vkCmdSetFragmentShadingRateKHR-commandBuffer-parameter  
  `commandBuffer` **must** be a valid [VkCommandBuffer](https://registry.khronos.org/vulkan/specs/latest/man/html/VkCommandBuffer.html) handle
- [](#VUID-vkCmdSetFragmentShadingRateKHR-pFragmentSize-parameter)VUID-vkCmdSetFragmentShadingRateKHR-pFragmentSize-parameter  
  `pFragmentSize` **must** be a valid pointer to a valid [VkExtent2D](https://registry.khronos.org/vulkan/specs/latest/man/html/VkExtent2D.html) structure
- [](#VUID-vkCmdSetFragmentShadingRateKHR-combinerOps-parameter)VUID-vkCmdSetFragmentShadingRateKHR-combinerOps-parameter  
  Each element of `combinerOps` **must** be a valid [VkFragmentShadingRateCombinerOpKHR](https://registry.khronos.org/vulkan/specs/latest/man/html/VkFragmentShadingRateCombinerOpKHR.html) value
- [](#VUID-vkCmdSetFragmentShadingRateKHR-commandBuffer-recording)VUID-vkCmdSetFragmentShadingRateKHR-commandBuffer-recording  
  `commandBuffer` **must** be in the [recording state](#commandbuffers-lifecycle)
- [](#VUID-vkCmdSetFragmentShadingRateKHR-commandBuffer-cmdpool)VUID-vkCmdSetFragmentShadingRateKHR-commandBuffer-cmdpool  
  The `VkCommandPool` that `commandBuffer` was allocated from **must** support graphics operations
- [](#VUID-vkCmdSetFragmentShadingRateKHR-videocoding)VUID-vkCmdSetFragmentShadingRateKHR-videocoding  
  This command **must** only be called outside of a video coding scope

Host Synchronization

- Host access to `commandBuffer` **must** be externally synchronized
- Host access to the `VkCommandPool` that `commandBuffer` was allocated from **must** be externally synchronized

Command Properties

     [Command Buffer Levels](#VkCommandBufferLevel) [Render Pass Scope](#vkCmdBeginRenderPass) [Video Coding Scope](#vkCmdBeginVideoCodingKHR) [Supported Queue Types](#VkQueueFlagBits) [Command Type](#fundamentals-queueoperation-command-types)

Primary  
Secondary

Both

Outside

Graphics

State

Conditional Rendering

vkCmdSetFragmentShadingRateKHR is not affected by [conditional rendering](#drawing-conditional-rendering)

## [](#_see_also)See Also

[VK\_KHR\_fragment\_shading\_rate](https://registry.khronos.org/vulkan/specs/latest/man/html/VK_KHR_fragment_shading_rate.html), [VkCommandBuffer](https://registry.khronos.org/vulkan/specs/latest/man/html/VkCommandBuffer.html), [VkExtent2D](https://registry.khronos.org/vulkan/specs/latest/man/html/VkExtent2D.html), [VkFragmentShadingRateCombinerOpKHR](https://registry.khronos.org/vulkan/specs/latest/man/html/VkFragmentShadingRateCombinerOpKHR.html)

## [](#_document_notes)Document Notes

For more information, see the [Vulkan Specification](https://registry.khronos.org/vulkan/specs/latest/html/vkspec.html#vkCmdSetFragmentShadingRateKHR)

This page is extracted from the Vulkan Specification. Fixes and changes should be made to the Specification, not directly.

## [](#_copyright)Copyright

Copyright 2014-2025 The Khronos Group Inc.

SPDX-License-Identifier: CC-BY-4.0